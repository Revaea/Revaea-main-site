/* Scoped styles for the /igcrystal route.
   All rules are nested under .igcrystal to avoid affecting the rest of the site. */

/* ============================================
   FONT DEFINITIONS
   ============================================ */

@font-face {
  font-family: "LoginClockV2";
  src: url("@assets/fonts/InterVariable.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "ConsolasLocal";
  src: url("@assets/fonts/Consolas.woff") format("woff2"), url("@assets/fonts/Consolas.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   ANIMATION KEYFRAMES
   ============================================ */

@keyframes colonBlink {
  0%, 60% { opacity: 1; }
  70%, 100% { opacity: 0.2; }
}

@keyframes caretBlink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}

@keyframes blobFloat1 {
  0%, 100% { transform: translate3d(-12%, -8%, 0) scale(1); }
  33% { transform: translate3d(8%, -2%, 0) scale(1.08); }
  66% { transform: translate3d(-4%, 10%, 0) scale(0.96); }
}

@keyframes blobFloat2 {
  0%, 100% { transform: translate3d(10%, 6%, 0) scale(1); }
  25% { transform: translate3d(-6%, 4%, 0) scale(1.06); }
  50% { transform: translate3d(6%, -8%, 0) scale(0.94); }
  75% { transform: translate3d(-2%, 2%, 0) scale(1.02); }
}

@keyframes blobFloat3 {
  0%, 100% { transform: translate3d(-6%, 12%, 0) scale(1); }
  40% { transform: translate3d(12%, -6%, 0) scale(1.05); }
  80% { transform: translate3d(-10%, -4%, 0) scale(0.97); }
}

@keyframes fadeInScaleSoft {
  0% { opacity: 0; transform: scale(1.04); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes fadeInOverlay {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes glitchShake {
  0% { transform: translate3d(0, 0, 0); }
  20% { transform: translate3d(1px, -1px, 0); }
  40% { transform: translate3d(-1px, 1px, 0); }
  60% { transform: translate3d(1px, 1px, 0); }
  80% { transform: translate3d(-1px, -1px, 0); }
  100% { transform: translate3d(0, 0, 0); }
}

@keyframes basicShake {
  0% { transform: translate3d(0, 0, 0); }
  25% { transform: translate3d(-1px, 1px, 0); }
  50% { transform: translate3d(1px, -1px, 0); }
  75% { transform: translate3d(-1px, -1px, 0); }
  100% { transform: translate3d(1px, 1px, 0); }
}

@keyframes lineGlitch {
  0% { transform: translateX(var(--offset, 0)); }
  25% { transform: translateX(calc(var(--offset, 0) + 1px)); }
  50% { transform: translateX(calc(var(--offset, 0) - 1px)); }
  75% { transform: translateX(calc(var(--offset, 0) + 2px)); }
  100% { transform: translateX(var(--offset, 0)); }
}

@keyframes scanScroll {
  0%   { background-position: 0 0, 0 0, 0 -20%; }
  100% { background-position: 0 6px, 0 3px, 0 200%; }
}

@keyframes scanFlicker {
  0%   { opacity: 0.88; }
  5%   { opacity: 0.94; }
  10%  { opacity: 0.82; }
  15%  { opacity: 0.97; }
  20%  { opacity: 0.78; }
  30%  { opacity: 1; }
  45%  { opacity: 0.86; }
  60%  { opacity: 0.93; }
  75%  { opacity: 0.80; }
  90%  { opacity: 0.90; }
  100% { opacity: 0.88; }
}

@keyframes popupAppear {
  0% { opacity: 0; transform: scale(0) rotate(6deg); }
  60% { transform: scale(1.06) rotate(-3deg); }
  100% { opacity: 1; transform: scale(1) rotate(0deg); }
}

@keyframes popupGlitch {
  0% { transform: translate(0, 0); }
  25% { transform: translate(1px, 1px); }
  50% { transform: translate(-1px, -1px); }
  75% { transform: translate(2px, 0); }
  100% { transform: translate(0, 0); }
}

.igcrystal {
  width: 100%;
  overflow-x: hidden;
  overscroll-behavior-x: none;
  touch-action: pan-y;
}

.igcrystal .clock-font {
  font-family: "LoginClockV2", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

.igcrystal .terminal-font {
  font-family: "ConsolasLocal", Consolas, "Courier New", ui-monospace, monospace;
}

.igcrystal * {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.igcrystal *::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}

.igcrystal .snap-y {
  scroll-behavior: smooth;
  overscroll-behavior-y: contain;
  -webkit-overflow-scrolling: touch;
}

@supports (scroll-timeline: --scroll) {
  .igcrystal .snap-y {
    scroll-timeline: --scroll;
  }
}

.igcrystal .enhanced-scroll {
  transition: scroll-top 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

@media (hover: none) and (pointer: coarse) {
  .igcrystal .snap-y {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}

.igcrystal .colon-pulse {
  display: inline-block;
  animation: colonBlink 1.2s infinite;
}

.igcrystal .caret-blink {
  animation: caretBlink 1s steps(1, end) infinite;
}

.igcrystal .blob-animate-1 { animation: blobFloat1 24s ease-in-out infinite; }
.igcrystal .blob-animate-2 { animation: blobFloat2 28s ease-in-out infinite; }
.igcrystal .blob-animate-3 { animation: blobFloat3 32s ease-in-out infinite; }

.igcrystal .animate-fade-in-scale-soft {
  animation: fadeInScaleSoft 800ms cubic-bezier(0.22, 1, 0.36, 1) both;
}

.igcrystal .snap-section {
  width: min(100%, 100vw);
  margin-left: auto;
  margin-right: auto;
  overflow-x: hidden;
}

@supports (overflow: clip) {
  .igcrystal .snap-section {
    overflow-x: clip;
  }
}

.igcrystal .animate-fade-in-overlay {
  animation: fadeInOverlay 600ms ease-out both;
}

.igcrystal .lockdown-glitch {
  animation: glitchShake 600ms steps(2, end) infinite;
}

.igcrystal .lockdown-scanlines {
  position: absolute;
  inset: 0;
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(0, 255, 170, 0.18) 0px,
      rgba(0, 255, 170, 0.18) 2px,
      rgba(0, 0, 0, 0) 2px,
      rgba(0, 0, 0, 0) 6px
    ),
    repeating-linear-gradient(
      to bottom,
      rgba(255, 40, 120, 0.14) 0px,
      rgba(255, 40, 120, 0.14) 1px,
      rgba(0, 0, 0, 0) 1px,
      rgba(0, 0, 0, 0) 3px
    ),
    linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.10) 48%,
      rgba(255, 255, 255, 0) 100%
    );
  background-size: 100% 6px, 100% 3px, 100% 20%;
  background-position: 0 0, 0 0, 0 -20%;
  animation: scanScroll 2.2s linear infinite, scanFlicker 1.2s steps(8, end) infinite;
  pointer-events: none;
  z-index: 2147483000;
}

.igcrystal .corruption-text {
  position: relative;
  display: inline-block;
  animation: basicShake 0.1s linear infinite;
}

.igcrystal .corrupted-lines {
  position: relative;
  display: block;
  line-height: 1;
}

.igcrystal .corrupted-lines .line {
  display: block;
  animation: lineGlitch 0.1s linear infinite;
}

.igcrystal .corrupted-lines .line:nth-child(1) { color: #ffffff; animation-delay: 0s; }
.igcrystal .corrupted-lines .line:nth-child(2) { color: #ff004088; animation-delay: 0.02s; }
.igcrystal .corrupted-lines .line:nth-child(3) { color: #00ffff77; animation-delay: 0.04s; }
.igcrystal .corrupted-lines .line:nth-child(4) { color: #ff004066; animation-delay: 0.06s; }
.igcrystal .corrupted-lines .line:nth-child(5) { color: #00ffff55; animation-delay: 0.08s; }
.igcrystal .corrupted-lines .line:nth-child(6) { color: #ff004044; animation-delay: 0.1s; }
.igcrystal .corrupted-lines .line:nth-child(7) { color: #00ffff33; animation-delay: 0.12s; }
.igcrystal .corrupted-lines .line:nth-child(8) { color: #ff004033; animation-delay: 0.14s; }
.igcrystal .corrupted-lines .line:nth-child(9) { color: #00ffff22; animation-delay: 0.16s; }
.igcrystal .corrupted-lines .line:nth-child(10) { color: #ff004022; animation-delay: 0.18s; }

.igcrystal .xp-popup {
  position: absolute;
  width: 320px;
  background: linear-gradient(to bottom, #3168d5, #1e4db8);
  border: 2px solid #000;
  border-radius: 2px;
  box-shadow:
    inset 1px 1px 0 rgba(255,255,255,0.35),
    2px 2px 4px rgba(0,0,0,0.55);
  color: white;
  font-family: "Tahoma", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
  font-size: 12px;
  pointer-events: none;
}

.igcrystal .xp-titlebar {
  background: linear-gradient(to bottom, #0053ee, #0040dc);
  margin: 0;
  padding: 4px 8px;
  display: flex;
  align-items: center;
  font-weight: 700;
  font-size: 12px;
  user-select: none;
}

.igcrystal .xp-content {
  padding: 8px;
  background: #f0f0f0;
  color: #000;
  border-top: 1px inset #ddd;
  display: flex;
  align-items: center;
  gap: 8px;
}

.igcrystal .xp-icon {
  width: 28px;
  height: 28px;
  background: #ff0000;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 800;
  font-size: 16px;
}

.igcrystal .popup-dynamic {
  opacity: 0;
  transform: scale(0) rotate(6deg);
}

@media (prefers-reduced-motion: reduce) {
  .igcrystal .blob-animate-1,
  .igcrystal .blob-animate-2,
  .igcrystal .blob-animate-3,
  .igcrystal .colon-pulse,
  .igcrystal .caret-blink,
  .igcrystal .lockdown-glitch,
  .igcrystal .lockdown-scanlines,
  .igcrystal .corruption-text,
  .igcrystal .corrupted-lines .line {
    animation: none;
  }
}
